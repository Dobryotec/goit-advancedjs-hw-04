{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst getAllPhotos = async ({ page, perPage, query }) => {\n  const params = {\n    page,\n    per_page: perPage,\n    q: query,\n    key: '33694347-6ae8de5621b95f7febdf77706',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  const res = await axios.get('', { params });\n\n  return res.data;\n};\n\nexport { getAllPhotos };\n","const createItem = ({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n  return `<li class=\"gallery-item\">\n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n  <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  </a>\n  <ul class=\"gallery-interactions-block\">\n  <li class=\"gallery-interactions-item\"><span class=\"gallery-interactions-activity\">Likes</span><span class=\"gallery-activity-quantity\">${likes}</span></li>\n  <li class=\"gallery-interactions-item\"><span class=\"gallery-interactions-activity\">Views</span><span class=\"gallery-activity-quantity\">${views}</span></li>\n  <li class=\"gallery-interactions-item\"><span class=\"gallery-interactions-activity\">Comments</span><span class=\"gallery-activity-quantity\">${comments}</span></li>\n  <li class=\"gallery-interactions-item\"><span class=\"gallery-interactions-activity\">Downloads</span><span class=\"gallery-activity-quantity\">${downloads}</span></li>\n  </ul>\n  </li>`;\n};\n\nexport { createItem };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getAllPhotos } from './js/pixabay-api';\nimport { createItem } from './js/render-functions';\n\nconst formEl = document.querySelector('#js-form');\nconst inputEl = document.querySelector('#js-input');\nconst galleryEl = document.querySelector('#js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst btnLoadMoreEl = document.querySelector('#js-btn-load-more');\n\nconst gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt' });\n\nconst params = {\n  page: 1,\n  perPage: 15,\n  query: '',\n  totalPages: 1,\n};\n\nformEl.addEventListener('submit', handleSearch);\n\nasync function handleSearch(e) {\n  e.preventDefault();\n  const query = inputEl.value.trim();\n  params.query = query;\n  galleryEl.innerHTML = '';\n\n  if (query === '') {\n    formEl.reset();\n    return;\n  }\n  loaderEl.classList.add('block');\n  btnLoadMoreEl.classList.remove('block');\n  params.page = 1;\n\n  try {\n    const data = await getAllPhotos(params);\n\n    const totalHits = data.totalHits;\n    params.totalPages = Math.ceil(totalHits / params.perPage);\n\n    if (data.hits.length === 0) {\n      return iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    galleryEl.innerHTML = data.hits.map(createItem).join('');\n    gallery.refresh();\n\n    if (params.totalPages > params.page) {\n      btnLoadMoreEl.classList.add('block');\n      btnLoadMoreEl.addEventListener('click', handleClickBtnLoadMore);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching the images. Please try again later!',\n      position: 'topRight',\n    });\n  } finally {\n    loaderEl.classList.remove('block');\n    formEl.reset();\n  }\n}\n\nasync function handleClickBtnLoadMore() {\n  params.page += 1;\n  btnLoadMoreEl.textContent = 'Loading...';\n  btnLoadMoreEl.disabled = true;\n  btnLoadMoreEl.classList.add('cursor');\n\n  try {\n    const { hits } = await getAllPhotos(params);\n    const markup = hits.map(createItem).join('');\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n    const cardEl = document.querySelector('.gallery-item');\n    const { height } = cardEl.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 4,\n      behavior: 'smooth',\n    });\n    btnLoadMoreEl.textContent = 'Load more';\n    btnLoadMoreEl.disabled = false;\n    btnLoadMoreEl.classList.remove('cursor');\n\n    if (params.totalPages === params.page) {\n      btnLoadMoreEl.classList.remove('block');\n      btnLoadMoreEl.removeEventListener('click', handleClickBtnLoadMore);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching the images. Please try again later!',\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["axios","getAllPhotos","page","perPage","query","params","createItem","largeImageURL","webformatURL","tags","likes","views","comments","downloads","formEl","inputEl","galleryEl","loaderEl","btnLoadMoreEl","gallery","SimpleLightbox","handleSearch","e","data","totalHits","iziToast","handleClickBtnLoadMore","hits","markup","cardEl","height"],"mappings":"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"}